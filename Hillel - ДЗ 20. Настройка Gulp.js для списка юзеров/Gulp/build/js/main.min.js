"use strict";function ownKeys(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function _objectSpread(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ownKeys(Object(t),!0).forEach((function(n){_defineProperty(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function _defineProperty(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,n,t){return n&&_defineProperties(e.prototype,n),t&&_defineProperties(e,t),e}var api=function(){var e="https://reqres.in/api";return new(function(){function n(){_classCallCheck(this,n)}return _createClass(n,[{key:"login",value:function(n,t){return fetch("".concat(e,"/login"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({email:n,password:t})}).then((function(e){return e.json()}))}},{key:"getUsers",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return fetch("".concat(e,"/users?page=").concat(n)).then((function(e){return e.json()}))}}]),n}())}(),_render=function(e,n){var t=e;return Object.keys(n).forEach((function(e){t=t.replaceAll("{{".concat(e,"}}"),n[e])})),t},LoginComponent=function(){function e(n,t){_classCallCheck(this,e),this._template=n,this._containerEl=t,this.onSuccess=function(){},this.render()}return _createClass(e,[{key:"onSubmit",value:function(){var e=this,n=this._containerEl.querySelector("#email_input").value,t=this._containerEl.querySelector("#password_input").value;api.login(n,t).then((function(n){e.onSuccess&&e.onSuccess(n.token)}))}},{key:"render",value:function(){var e=this;this._containerEl&&(this._containerEl.innerHTML=_render(this._template,{}),this._containerEl.addEventListener("click",(function(n){n.target.classList.contains("btn-submit")&&e.onSubmit(n)})))}}]),e}(),UserComponent=function(){function e(n,t,r){_classCallCheck(this,e),this._template=n,this._userCardTemplate=t,this._containerEl=r,this.list=[],this.onSuccess=function(){},this.loadUsersList()}return _createClass(e,[{key:"loadUsersList",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;api.getUsers(n).then((function(n){var t=n.data;e.list=t,e.render()}))}},{key:"render",value:function(){var e=this;this._containerEl&&(this._containerEl.innerHTML=_render(this._template,{}),this._containerEl.querySelector("#user-list").innerHTML=this.list.map((function(e){return _objectSpread(_objectSpread({},e),{},{name:"".concat(e.first_name," ").concat(e.last_name)})})).map((function(n){return _render(e._userCardTemplate,n)})).join("\n"))}}]),e}(),mainContainer=document.getElementById("main"),login=new LoginComponent(document.getElementById("loginTemplate").innerText,mainContainer);function onSuccessLogin(){new UserComponent(document.getElementById("userListTemplate").innerText,document.getElementById("userCardTemplate").innerText,mainContainer)}login.onSuccess=onSuccessLogin;